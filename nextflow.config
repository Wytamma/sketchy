profiles {
    singularity {
        process.executor = "local"
        process.container = "docker://esteinig/sketchy"
        singularity.enabled = true
        singularity.autoMounts = true
    }

    docker {
        process.executor = "local"
        process.container = "docker://esteinig/sketchy"
        docker.enabled = true
    }

    jcu {
        process.executor = "pbspro"
        process.container = "docker://esteinig/sketchy"
        singularity.enabled = true
        singularity.autoMounts = true
    }
}

params {

    outdir       = "test"
    prefix       = "test"

    fastq        = "*.fq"
    quality      = 7
    length       = 200

    sketchy      =  true
    sketchy_path =  "/sketchy"

    sketches     =  ["saureus_15_1000"]
    ranks        =  [10]
    limits       =  [100]
    time         =  true

    build        = false
    fasta        = "*.fasta"
    kmer_size    = 15
    sketch_size  = 1000
    
    bootstrap    = false
    samples      = 100
    limit        = 10000
    seed         = 42

    metagenome   = false
    taxdb        = "$HOME/resources/minikraken2"
    species      = "Klebsiella pneumoniae"

}

process {

    errorStrategy = "ignore"
    scratch = true

    withLabel: sketchy {
        cpus = 4
        memory = "8G"
        time = "1h"
    }
    withLabel: build {
        cpus = 4
        memory = "8G"
        time = "8h"
    }
    withLabel: kraken2 {
        cpus = 16
        memory = "32G"
        time = "8h"
    }

}
