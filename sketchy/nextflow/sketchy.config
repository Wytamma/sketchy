profiles {
    local {
        process.executor = "local"
    }
    cluster {
        process.executor = "pbspro"
        process.clusterOptions = "-v PATH=$HOME/conda/bin:$PATH"
    }
}

params {

    fastq                   =           "$PWD/*.fq"
    prefix                  =           "preprint_run1"
    outdir                  =           "preprint_run1"

    conda                   =           "$HOME/conda/envs"

    sketchy                 =           false
    preprint                =           true
    mixture                 =           false
    species                 =           "Staphylococcus aureus"

    mode                    =           "single"

    reads                   =           20001
    evaluation              =           [100, 500, 1000, 2000, 3000, 5000, 7000, 10000, 15000, 20000]
    ranks                   =           100
    meta                    =           "$PWD/meta.json"

    resources               =           "$HOME/resources"
    minikraken              =           "minikraken2"

}

process {

    errorStrategy = "ignore"

    withLabel: sketchy {
        conda = "$params.conda/sketchy"
        cpus = 4
        memory = "16G"
        time = "24h"
    }

    withLabel: kraken2 {
        conda = "$params.conda/pf-kraken"
        cpus = 8
        memory = "32G"
        time = "24h"
    }

}
