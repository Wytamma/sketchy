profiles {
    local {
        process.executor = "local"
    }
    cluster {
        process.executor = "pbspro"
        process.clusterOptions = "-S /bin/bash -v PATH=$HOME/miniconda3/bin:$PATH"
    }
}

params {

    prefix                  =           "test"
    outdir                  =           "sketchy_out"

    mode                    =           "bootstrap"

    fastq                   =           "*.fq"
    sketch                  =           "mrsa_15_1000.msh"
    sketch_data             =           "sketchy.merge.tsv"
    bootstraps              =           100
    sample_reads            =           10000
    predict_reads           =           10
    predict_ncpu            =           1

    fasta                   =           ""
    sketch_kmer             =           [15, 16, 17, 18, 19, 20, 21]
    sketch_size             =           [1000]
    fasta_glob              =           "*"

}

process {

    errorStrategy = "ignore"

    withLabel: bootstrap {
        conda = "$HOME/miniconda3/envs/sketchy"
        cpus = 1
        memory = "4G"
        time = "2h"
    }
    withLabel: predict {
        conda = "$HOME/miniconda3/envs/sketchy"
        cpus = 1
        memory = "4G"
        time = "1h"
    }

    withLabel: kraken2 {
        conda = "$params.conda/pf-kraken"
        cpus = 16
        memory = "32G"
        time = "2h"
    }

}
